混沌工程是什么

简单的说混沌工程就是像演习一样，通过有目的的搞破坏，找出系统可能存在的弱点，从而验证在真实复杂的环境下，系统，人员应对各种突发问题的能力是否符合预期,提升系统的免疫能力



![](https://gitee.com/hxc8/images5/raw/master/img/202407172359938.jpg)

其实就是验证系统的韧性和验证系统自愈能力。





混沌工程要做什么？



混沌工程的原理



![](https://gitee.com/hxc8/images5/raw/master/img/202407172359104.jpg)



第一个，稳态假设。



![](https://gitee.com/hxc8/images5/raw/master/img/202407172359615.jpg)





稳态的定义：

1、关注系统可测量的输出，而不是系统内部的属性。

比如tikv的观测性做的比较好的，通过部署prometheus和grafana来观测这个应用，有了监控系统的数据后如何定义这个维态呢？比如某个节点上的吞吐量和执行延迟，这是比较好的，可观测的输出。坏的是什么呢，系统内部状态，混沌工程比较像黑盒， 不希望去看tikv里面多少个节点里面多少个leader,分布式怎样的，这样一个内部的状态。

2、对这些输出在短时间内的度量构成了系统稳定状态。



3、整个系统的吞吐量、错误率、延迟百分点等都可能是表示稳态行为的指标



4、在对照组和实验组中持续关注稳态的差异







受控的混沌实验



1、爆炸半径

- 环境隔离   比如container技术是能达到这个环境隔离目的的。

- 资源限制   我们也不知道实验组会吃掉多少资源。

- 流量控制   生产环境，网飞说不会超过5%

- 自动停止   



2、安全管控

- 权限的控制     被用来干坏事或者误操作，举个例子可以用 kubernetes rbac权限去做设置。







![](https://gitee.com/hxc8/images5/raw/master/img/202407172359060.jpg)



![](https://gitee.com/hxc8/images5/raw/master/img/202407172359289.jpg)



   

![](https://gitee.com/hxc8/images5/raw/master/img/202407172359510.jpg)





![](https://gitee.com/hxc8/images5/raw/master/img/202407172359627.jpg)

