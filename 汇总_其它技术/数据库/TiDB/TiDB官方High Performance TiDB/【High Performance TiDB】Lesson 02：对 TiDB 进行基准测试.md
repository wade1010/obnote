

![](https://gitee.com/hxc8/images7/raw/master/img/202407190808184.jpg)





![](https://gitee.com/hxc8/images7/raw/master/img/202407190808729.jpg)

当我们积累一定的profile分析经验，对于一个新的场景，就很容易忽略那些比例正常的节点，找到异常的函数开销，异常的函数开销，通常是因为执行的语句或者work load 比较特殊，tidb没有做过针对性的优化。如果做针对性的优化，往往会有很明显的成效。对于复杂的场景，性能开销可能会分散在各个函数上，找不到明显的优化点。这种情况下，我们可以简化场景，消除背景噪音，针对单一的事务或者语句来优化



CPU Profile 比较适合用来优化简单的场景和语句，对于复杂的查询，还需要查看查询计划是否正确。

