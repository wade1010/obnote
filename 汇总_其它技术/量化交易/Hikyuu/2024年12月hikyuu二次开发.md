![image.png](https://gitee.com/hxc8/images9/raw/master/img/202412012134506.png)


vs版本 2022 17.9.1

conda create -n hikyuu python=3.12


git clone --depth=1 https://github.com/fasiondog/hikyuu.git --recursive

进入根目录

pip install -r requirements.txt

如果需要，就设置科学代理

python setup.py build -j 8  (根据核数调整)

后来发现xtquant不支持3.12。又退到3.10

conda create -n hikyuu python=3.10

重新执行上述几个步骤


git clone --depth=1 https://github.com/fasiondog/hikyuu.git --recursive

进入根目录

pip install -r requirements.txt

如果需要，就设置科学代理

python setup.py build -j 8  (根据核数调整)

2024-12-1 22:30开始执行
2024-12-1 23:01执行结束
![image.png](https://gitee.com/hxc8/images9/raw/master/img/202412012303302.png)


官方文档里面写的是 python setup.py install 将hikyuu，安装到site-packages下面，这个有两个小问题，一个是pip list里面看不到hikyuu（但是确实是可以import的），另外一个就是每次修改都是需要重新install。

这里我修改了hikyuu/hikyuu/setup.py(这个文件，作者应该很久不更新了)，我修改如下

```
#!/usr/bin/env python  
#-*- coding:utf-8 -*-  
  
import platform  
import sys  
import os  
try:  
    from setuptools import find_packages, setup  
except ImportError:  
    from distutils.core import find_packages, setup  
  
if sys.argv[-1] == 'publish':  
    os.system("python setup.py bdist_wheel --python-tag cp35 -p win-amd64")  
    #python setup.py bdist_wheel --python-tag cp35 -p linux_x86_64  
    os.system("twine upload dist/*")  
    sys.exit()  
  
  
def parse_requirements(filename):  
    line_iter = (line.strip() for line in open(filename))  
    return [line for line in line_iter if line and not line.startswith('#')]  
  
  
requirements = parse_requirements('../requirements.txt')  
  
hku_name = "Hikyuu"  
  
hku_version = ''  
with open('../xmake.lua', 'r', encoding='utf-8') as f:  
    for line in f:  
        if len(line) > 15 and line[:11] == 'set_version':  
            pre_pos = line.find('"') + 1  
            end_pos = line.find('"', pre_pos)  
            hku_version = line[pre_pos:end_pos]  
            break  
  
if not hku_version:  
    print("无法在 xmake.lua 中找到 set_version 语句，获取版本号失败！")  
    exit(0)  
  
print('current hikyuu version:', hku_version)  
  
py_version = platform.python_version_tuple()  
py_version = int(py_version[0]) * 10 + int(py_version[1])  
  
  
hku_author = "fasiondog"  
hku_author_email = "fasiondog@sina.com"  
  
hku_license = "MIT"  
hku_keywords = [  
    "quant", "trade", "System Trading", "backtester", "量化", "程序化交易", "量化交易",  
    "系统交易"  
]  
hku_platforms = "Independant"  
hku_url = "http://hikyuu.org/"  
  
hku_description = "Hikyuu Quant Framework for System Trading Analysis and backtester"  
with open("../readme.md", encoding='utf-8') as f:  
    hku_long_description = f.read()  
  
  
hku_data_files = []  
  
setup(  
        name = hku_name,  
        version = hku_version,  
        description = hku_description,  
        long_description_content_type='text/markdown',  
        long_description = hku_long_description,  
        author = hku_author,  
        author_email = hku_author_email,  
        license = hku_license,  
        keywords = hku_keywords,  
        platforms = hku_platforms,  
        url = hku_url,  
  
        packages = find_packages(),  
        zip_safe = False,  
        include_package_data=True,  
        package_data={  
            '': [  
                '*.rst', '*.pyd', '*.png', '*.md', '*.ipynb', '*.ini', '*.sql', '*.properties', '*.xml',  
                'LICENSE.txt', '*.dll', '*.exe', '*.ico', '*.so', '*.dylib', '*.h', '*.lib',  
                '*.so.*', '*.qm', 'libboost_serialization*',  
                'libboost_python{}*'.format(py_version)  
            ],  
        },  
  
        data_files = hku_data_files,  
  
        classifiers=[  
            # How mature is this project? Common values are  
            #   3 - Alpha            #   4 - Beta            #   5 - Production/Stable            'Development Status :: 3 - Alpha',  
  
            # Indicate who your project is intended for  
            'Intended Audience :: Developers',  
            'Topic :: Software Development :: Libraries :: Python Modules',  
            'Topic :: Office/Business :: Financial',  
            'Topic :: Office/Business :: Financial :: Investment',  
            'Topic :: Scientific/Engineering :: Mathematics',  
  
            # Pick your license as you wish (should match "license" above)  
            'License :: OSI Approved :: MIT License',  
            'Operating System :: Microsoft :: Windows',  
            'Operating System :: POSIX :: Linux',  
            'Operating System :: MacOS :: MacOS X',  
  
            # Specify the Python versions you support here. In particular, ensure  
            # that you indicate whether you support Python 2, Python 3 or both.            'Programming Language :: Python :: 3',  
            'Programming Language :: Python :: 3.8',  
            'Programming Language :: Python :: 3.9',  
            'Programming Language :: Python :: 3.10',  
            'Programming Language :: Python :: 3.11',  
            'Programming Language :: Python :: 3.12',  
            'Programming Language :: Python :: 3.13',  
        ],  
  
        entry_points={  
            # win11下使用 GUI 方式，会立刻 timeout，导致无法下载  
            # 'gui_scripts': [  
            #     'HikyuuTDX=hikyuu.gui.HikyuuTDX:start',            # ],            'console_scripts': [  
                'HikyuuTDX=hikyuu.gui.HikyuuTDX:start',  
                'importdata=hikyuu.gui.importdata:main',  
            ]  
        },  
        install_requires=requirements,  
        )
```


然后执行 

```
python setup.py uninstall
```

进行开发链接

```

```







