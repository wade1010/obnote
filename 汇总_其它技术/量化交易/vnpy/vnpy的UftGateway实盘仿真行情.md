[https://zhuanlan.zhihu.com/p/431061580](https://zhuanlan.zhihu.com/p/431061580)

发布于vn.py社区公众号【vnpy-community】

**原文作者**：hxxjava | **发布时间**：2021-05-18

### **认识下恒生金融云测试平台**

尽管SimNow已经回到了我们的身边，但过去一个多月里的种种不便还是让大家颇为不爽，友商大厂也不失时机的抓紧推广自己的仿真环境：

**《被SimNow伤透了心？恒生金融交易测试平台了解一下》**

看过本公众号《一张图系列》文章的同学（还没看过？**戳我**），估计对于**恒生电子**这家国内老牌金融科技公司都不会陌生。恒生的业务范围覆盖国内主流的三大金融产品：证券、期货和期权，系统方面也覆盖了主席集中柜台（UF2.0）、次席极速柜台（UFT、NST）以及全业务资管系统（O32、O4）。

恒生很早就推出了类似SimNow的测试环境，但以前由于没有提供实盘仿真行情，因此只能用于测试API接口本身的功能，而并不适合用于量化策略的仿真交易。

这次为了抓紧机会抢夺市场份额，总算是把**实盘仿真行情和仿真撮合**给加上了（抢吧抢吧，反正对用户来说都是好事，要鼓励竞争嘛~~~）。

不过这套测试环境的注册和使用步骤目前还是比较繁琐，所以接下来本文中就来带着大家一步一步操作。

### **注册和使用的详细步骤**

### **1. 注册恒生云账号**

在浏览器中输入[http://ufx.hs.net](https://link.zhihu.com/?target=http%3A//ufx.hs.net/)，进入如下页面：

![](https://gitee.com/hxc8/images5/raw/master/img/202407172334144.jpg)

点击右上角的【注册】按钮，进入用户注册页面：

![](https://gitee.com/hxc8/images5/raw/master/img/202407172334570.jpg)

按照顺序填入以下信息：

1. 手机号

1. 验证码

1. 密码

1. 密码确认

勾选下面的勾选框，点击【同意协议并注册】按钮就可以完成注册了。

### **2. 申请期货测试账户及密码**

完成了第1步之后，你已经有一个恒生云平台的账户。再次回到[http://ufx.hs.net](https://link.zhihu.com/?target=http%3A//ufx.hs.net/)，点击右上角的【登录】按钮，输入手机号和密码就可以登录：

![](https://gitee.com/hxc8/images5/raw/master/img/202407172334982.jpg)

点击图中的申请期货、证券或者股票期权下的【申请】按钮，就可以申请你想要的测试账户，注意其中不同市场的测试账户和密码可能不一样。

记住这里**测试账号和测试密码**，这是接下来在vn.py中登录UftGateway要用到的用户名与密码（注意不是注册网站的手机号和密码！）。

点击图中的【接口下载】按钮，进入下一步。

### **3. 获取接口认证文件(lisence.dat)和记录服务器地址**

![](https://gitee.com/hxc8/images5/raw/master/img/202407172334196.jpg)

点击图中标记1处的下载链接，下载一个包含认证文件lisence.dat的rar文件。

同时记录标记2处的服务器地址和端口号，记录标记4和标记5处的【直连模式】穿透式接入AppID和授权码，这些信息接下来在vn.py中登录UftGateway时会用到。

### **4. 启动VN Trader**

启动VN Station后，点击底部的【VN Trader Pro】按钮，进入VN Trader配置界面，如下图所示：

![](https://gitee.com/hxc8/images5/raw/master/img/202407172334715.jpg)

然后执行三步操作：

1. 在左侧的底层接口区域中，勾选【恒生UFT】接口；

1. 在资源管理器中打开图中的标记2位置的VN Trader运行目录，把步骤3中下载的认证文件lisence.dat复制到该目录；

1. 最后点击右下角的【启动】按钮运行VN Trader。

### **5. 连接UftGateway**

进入VN Trader主界面后，点击顶部菜单栏的【系统】->【连接UFT】，进入如下图所示的UFT连接对话框：

![](https://gitee.com/hxc8/images5/raw/master/img/202407172334777.jpg)

其中标记1-7中的各项内容已经在前面的第2和第3步中获得，唯一需要注意的是图中标记8处的【**委托类型】必须填7**（专门从恒生云客服那才问到的！）

最后点击底部的【连接】按钮就可以成功登录恒生云的交易测试账户了。

### **6. 订阅合约行情**

登录成功后，可以在底部的日志和资金监控区域看到显示的正确信息，如下图所示：

![](https://gitee.com/hxc8/images5/raw/master/img/202407172334983.jpg)

接下来就可以在左上角的交易模块中，选择要订阅行情的合约的交易所，输入合约代码后，回车订阅行情。随后几乎瞬间就可以在顶部的行情监控组件中看到已经成功订阅了MA109.CZCE和rb2110.SHFE的行情了。

### **7. 基础交易测试**

最后，测试环境都连上了，免不了要手动下几笔委托来测测能否正常交易了：

![](https://gitee.com/hxc8/images5/raw/master/img/202407172334393.jpg)

可以看到图中委托、持仓等数据均可以正常显示，至此我们也完成了恒生云金融交易测试平台的对接流程。

**最后一些注意事项**

- 恒生产品中容易混淆的一些名词：

- UF2.0：恒生集中柜台；

- UFT：恒生极速柜台；

- UFX：恒生统一接入网关，一种通讯协议（类似FIX协议）；

- 极速API：类似CTP API风格的开发接口（UftGateway基于此开发）；

- 极速API（UftGateway）的行情和交易服务器可以使用同一服务器地址和端口；

- 关于license.dat授权文件：

- 恒生所有接口在使用时，都必须将该文件放置于exe程序的运行时目录；

- 每家期货公司和券商都有自己独一无二的授权文件，必须申请拿到该文件后才能使用API交易。

发布于 2021-11-09 09:25

自己的。

![](https://gitee.com/hxc8/images5/raw/master/img/202407172334556.jpg)

![](https://gitee.com/hxc8/images5/raw/master/img/202407172334805.jpg)