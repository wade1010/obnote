       除了要学习PHP的基本知识，比如《为开发者准备的9个实用PHP代码片段》《深入探讨PHP类的封装与继承》《PHP比较运算符的详细学习》，还要了解一些代码优化上的技巧，从而帮助我们写出更加优秀的程序。我们在编写程序时，总是想要使自己的程序占用资源最小，运行速度更快，代码量更少。PHP 独特的语法混合了 C、Java、Perl 以及 PHP 自创新的语法，它可以比 CGI或者Perl更快速的执行动态网页。PHP是将程序嵌入到HTML文档中去执行，执行效率比完全生成HTML标记的CGI要高得多。

![](https://gitee.com/hxc8/images8/raw/master/img/202407191110778.jpg)

                                                                     （水印遮住的是"Mail Server"）



PHP优化的目的是花最少的代价换来最快的运行速度与最容易维护的代码。给大家提供下面这些优化技巧：



1. echo 比 print 快。



2. 使用echo的多重参数代替字符串连接。



3. 在执行for循环之前确定最大循环数，不要每循环一次都计算最大值，最好运用foreach代替。



4. 对global变量，应该用完就unset()掉。



5. 用单引号代替双引号来包含字符串，这样做会更快一些。因为PHP会在双引号包围的字符串中搜寻变量，单引号则不会。



6. 函数代替正则表达式完成相同功能。



7. 当执行变量$i的递增或递减时，$i++会比++$i慢一些。这种差异是PHP特有的，并不适用于其他语言，++$i更快是因为它只需要3条指令(opcodes)，$i++则需要4条指令。后置递增实际上会产生一个临时变量，这个临时变量随后被递增。而前置递增直接在原值上递增。



8. 使用选择分支语句（switch case）好于使用多个if，else if语句。



9. 利用var_dump进行PHP代码调试。如果你在寻找php调试技术，我必须说var_dump应该是你要找的目标，在显示php信息方面这个命令可以满足你的所有需要，而调试代码的多数情况与得到PHP中的数值有关。



10. 在包含文件时使用完整路径，解析操作系统路径所需的时间会更少。



11. 动辄创建全局数值是一种糟糕的做法，不过有时候实际情况的确又需要这么做。对于数据库表或数据库连接信息使用全局数值是一个不错的想法，但不要在你的PHP代码中频繁使用全局数值。另外，更好的一种做法是把你的全局变量存放在一个config.php文件中。



12. 如果你想知道脚本开始执行的时刻，使用$_SERVER[‘REQUEST_TIME’]要好于time()。



13. 打开apache的mod_deflate模块。



14. 用@屏蔽错误消息的做法非常低效。



15. 尽量采用大量的PHP内置函数。



16. 递增一个未预定义的局部变量要比递增一个预定义的局部变量慢9至10倍。



17. 派生类中的方法运行起来要快于在基类中定义的同样的方法。



18. 仅定义一个局部变量而没在函数中调用它，同样会减慢速度（其程度相当于递增一个局部变量）



19. Apache解析一个PHP脚本的时间要比解析一个静态HTML页面慢2至10倍。尽量多用静态HTML页面，少用脚本。



20. 正如之前提到的，任何php网站中最重要的部分有99%的可能是数据库。因此，你需要非常熟悉如何正确的使用sql，学会关联表和更多高级的数据库技术。



21. 调用带有一个参数的空函数，其花费的时间相当于执行7至8次的局部变量递增操作。



22. 当操作字符串并需要检验其长度是否满足某种要求时，你想当然地会使用strlen()函数。此函数执行起来相当快，因为它不做任何计算，只返回zval 结构（C的内置数据结构，用于存储PHP变量）中存储的已知字符串长度。



23. 并不是所有情况都必须使用面向对象开发，面向对象往往开销很大，每个方法和对象调用都会消耗很多内存。



24. 除非脚本可以缓存，否则每次调用时都会重新编译一次。引入一套PHP缓存机制通常可以提升25%至100%的性能，以免除编译开销。







最后再提醒一下在代码优化的时候应该注意的事情：



1. 短代码不等于快的代码

很多人在写程序时希望将代码写的越简洁越好，但是越短的代码有时候反而需要更长的执行时间。



2. 在写程序的时候更应该注重程序的扩展性，而不是追求速度。



3. 在优化你的代码之前，先看看跟数据库有关的部分，因为大多数应用程序的瓶颈在数据库而不是代码。



4. 微优化得不偿失

什么叫做微优化？就像前面所说的将正则表达式部分的代码改用字符串函数代替。这样做有以下缺点：

（1）花费时间较长

（2）不会根本上解决性能问题

（3）很有可能会破坏以前的代码从而产生未知的错误

（4）付出大于回报



       这里还不得不提到一个误区，有些人为了让程序更加优化，在分析业务逻辑的时候便将优化考虑在内了，从而为了得到更优的代码而改动业务逻辑。这是十分愚蠢的想法，因为程序的目的便是为了处理现实中遇到的问题，我们不能本末倒置。



