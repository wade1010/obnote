1、类需要析构函数吗？

先说下析构函数的作用，它会自动执行，类要释放的时候，析构函数会自动执行，如果没写析构函数，编译器会自动给你生成一个析构函数。

并不是所有有构造函数的类都要编写析构函数，比如类的构造函数，并没有做特殊的工作，只是对成员变量进行初始化，那么结束的时候，析构函数也不需要做什么事情。

有一种情况是需要注意的，如果说，我们在一个类的构造函数通过用new运算符来分配内存单元，那么这时候就需要在类里面定义一个析构函数，这样通过构造函数申请内存，通过析构函数释放内存。

总结：不是一定需要析构函数，如果说类里面构造函数有new，那么就需要编写析构函数，在析构函数里面delete。

2、类需要一个虚析构函数吗？

先要了解什么是虚函数，如果一个类有派生类的话，那么在代码定义的时候用基类创建一个指针或引用，这个指针或引用，指向基类或者派生类，派生类可能会用到基类的一些方法，有可能会混淆，如果基类指针指向的是派生类，此时派生类对应的对象，在调用成员函数的时候，到底调用的是基类的成员函数还是派生类的成员函数。

一旦存在虚函数，我们就知道一定存在派生类和基类。

![](https://gitee.com/hxc8/images2/raw/master/img/202407172217213.jpg)

如果不作为基类，可以不定义虚析构函数，但是这个类有可能被别人拿去作为基类，就有可能会出现问题。

构造函数，调用顺序是先构造基类，再构造派生类，而调用析构函数恰好相反，先调用派生类析构函数，再调用基类析构函数，

总结：平时开发的时候，如果确定不作为基类，可以不加虚析构函数，如果作为基类或者有可能作为基类，最好把析构函数定义为虚析构函数，进行释放的时候，出现错误。

![](images/WEBRESOURCE2a73be85acdf0a291525d5d50b562cd7截图.png)