for i := 0; i < 3; i++ {
  defer func() {
   fmt.Println(i)
  }()
}



程序将会输出：

3
3
3



因为闭包引用匿名函数外面的变量相当于是指针引用，得到的是变量的地址，实际到defer真正执行时，指针指向的内容已经发生的变化







闭包的上下文引用特性